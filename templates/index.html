{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="API, Joke, Entertainment, Yo Mama Jokes, The Dozens " />
  <title>The Dozens - The Yo' Momma Jokes API</title>
  <link rel="icon" type="image/x-icon" href="https://yo-mama.b-cdn.net/favicon.ico" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.17.4/dist/css/uikit.min.css" />
  <script src="https://kit.fontawesome.com/58e27c88da.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <script src="https://unpkg.com/highlight.run"></script>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  <style>
    @font-face {
      font-family: YoMamaHeader;
      src: url(https://cdn.yo-momma.net/staticfiles/fonts/caloriesuitDEMO.otf);
    }

    @font-face {
      font-family: YoMamaBody;
      src: url(https://cdn.yo-momma.net/staticfiles/fonts/JuliusSansOne-Regular.ttf);
    }

    :root {
      --color-primary: #770071;
      --color-secondary: #bd00b4;
      --color-accent: #beda00;
      --color-white: #ffffff;
      --z-preloader: 9999;
      --transition-standard: 300ms ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background-image: url('https://source.unsplash.com/random/1920x1080');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }

    body {
      background-image: url("https://cdn.yo-momma.net/staticfiles/assets/background.svg");
      background-repeat: no-repeat;
      background-color: #d1d937;
      background-size: cover;

      font-family: "YoMamaBody";
      background-attachment: fixed;
      background-position: center;

      height: 135vh;


    }

    #preloader {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: var(--z-preloader);
      opacity: 1;
      transition: opacity var(--transition-standard);
    }
      
    .loading-container {
      text-align: center;
      color: var(--color-white);
    }

    #loading-message {
      font-size: 1.5rem;
      margin-bottom: 2rem;
    }

    #phrases {
      max-width: 600px;
      margin: 0 auto;
    }

    .phrase-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      color: var(--color-white);
      opacity: 0.7;
      transition: all 0.3s ease;
    }

    .phrase-item.completed {
      opacity: 1;
    }

    .checkmark {
      width: 24px;
      height: 24px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .phrase-item.completed .checkmark {
      opacity: 1;
    }

    .fade-out {
      opacity: 0 !important;
    }

    /* Content Styles */
    .content-wrapper {
      position: relative;
      z-index: 1;
      opacity: 0;
      transition: opacity var(--transition-standard);
      min-height: 100vh;
    }

    .content-wrapper.show {
      opacity: 1;
    }

    /* Yo Mama Specific Styles */
    .joke-of-day {
      background-color: var(--color-primary);
      color: var(--color-white);
      border-radius: 25px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .joke-title {
      background-color: var(--color-accent);
      color: #333;
      border-radius: 15px;
      padding: 1rem;
      transition: background-color 0.3s ease;
    }

    .joke-title:hover {
      background-color: var(--color-secondary);
      color: var(--color-white);
    }

    .scale-font {
      font-size: clamp(1rem, 2vw, 1.5rem);
    }

    .main-content {
      padding: 2rem;
    }

    .features-section {
      background: white;
      border-radius: 8px;
      padding: 2rem;
      margin-top: 2rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .site-footer {
      background: var(--color-primary);
      color: var(--color-white);
      padding: 1rem;
      margin-top: 2rem;
    }

  /* Mobile Styles */
@media (max-width: 768px) {
  .mobile-redirect {
    display: none !important;
  }
  
  .mobile-background {
    display: none !important;
  }
  
  .responsive-wrapper:not(.mobile-redirect) {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .mobile-redirect {
    display: block !important;
  }
  
  .mobile-background {
    display: block !important;
    background-image: linear-gradient(315deg, #770071 0%, #620062 74%);
    background-size: cover;
    background-position: center;
    background-repeat: repeat;
    height: 100vh;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2
  }
  
}

    /* Scrollbar Styles */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--color-primary);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-secondary);
    }
  </style>
</head>

<body>
  <!-- Fixed Background -->
  <div class="background-container"></div>

  <!-- Preloader -->
  <div id="preloader">
    <div class="loading-container">
      <div id="loading-message">Loading awesome jokes...</div>
      <div id="phrases"></div>
    </div>
  </div>
  <div class="layout-container">

    <div class="content-wrapper">
      <!-- Paste the provided content here -->
      <div class="responsive-wrapper fade-in">

        <!--suppress HtmlUnknownAttribute -->
        <nav uk-dropnav>
          <ul class="uk-subnav justify-content-between navbar-main flex-nowrap">
            <li class="ps-0 ms-4">
              <img id="yo-mama-brand" class="navbar-brand img-fluid" src="https://yo-mama.b-cdn.net/yo_momma_bvrand.png"
                alt="Yo Mama Logo" />
            </li>
            <li><a class="header-font" href="https://www.brooksjr.com" target="_blank">About the Developer</a></li>
            <li>
              <a class="header-font" href="#">The API <!--suppress HtmlUnknownAttribute, HtmlUnknownAttribute -->
                <span uk-drop-parent-icon></span></a>
              <div class="uk-dropdown">
                <ul class="uk-nav uk-dropdown-nav">
                  <li><a target="_blank" class="header-font" href="{% url 'swagger' %}">Swagger</a></li>
                  <li><a target="_blank" class="header-font"
                      href="https://www.postman.com/terryabrooksjr/the-roast-api-yo-mama-jokes/overview">Postman</a>
                  </li>
                  <li><a target="_blank" class="header-font" href="/graphql">GraphQL</a></li>
                  <li><a href="#" class="header-font">Register to Contribute</a></li>
                  <li><a id="reportAJokeTrigger" class="header-font" data-bs-toggle="modal"
                      data-bs-target="#reportJokeModal">Report a Joke To Be Reviewed</a></li>
                </ul>
              </div>
            </li>

            <li><a class="header-font" href="#">The History of Yo' Momma Jokes<span uk-drop-parent-icon></span></a>
              <div class="uk-dropdown">
                <ul class="uk-nav uk-dropdown-nav">
                  <li><a class="header-font" href="#history-overview-modal" uk-toggle>Overview</a></li>
                  <!--suppress HtmlUnknownTag -->
                  <br />
                  <li><!--suppress HtmlUnknownAttribute -->
                    <a class="header-font" href="#history-origins-modal" uk-toggle>Origins</a>
                  </li><br />
                  <li><a class="header-font" href="#history-practice-modal" uk-toggle>Purpose & Practice</a></li><br />
                  <li><a class="header-font" href="#history-ref-modal" uk-toggle>References</a></li><br />
                </ul>
              </div>
            </li>
            <li>
              <div class="hidden">
                <form>
                  <span id="csrf_token">
                    {% csrf_token %}
                  </span>
                </form>
              </div>
              <div class="showHide container px-2 text-center align-middle">
                <div id="joke-of-day-title-parent" class="row gx-1">
                  <div class="RandomJoke col-12 col-md-4">
                    <img id="jod-icon" class="icon-joke-of-day" src="https://yo-mama.b-cdn.net/icon-jod.png" />
                  </div>
                  <div class="joke-content-parent col-12 col-md-8">
                </div>
              </div>
              </div>
            </li>
          </ul>

        </nav>
        <main>

          <section class="desktop-display">
            <div class="row" id="body-img-row">
              <div class="col-12 col-md-4 ps-0 py-0 ms-5 mt-n3">
                <img id="dozens-image" src="{% static 'assets/Dozen-Word-brand.png' %}" alt="body-typography"
                  class="img-fluid" />
              </div>

            </div>
            <div class="row" id="body-copy">
              <div class="col-12 col-md-6 text-center">
                <p>Introducing a powerful and versatile Yo Mama Jokes API, meticulously crafted using Python 3.0's
                  exceptional
                  web framework, Django, in conjunction with the Django REST framework.</p>
                <p>This Yo Mama Jokes API is designed to be scalable, secure, and user-friendly, making it the perfect
                  tool
                  for integrating humor into your applications. Whether you're building a fun app, adding some
                  lightheartedness to a website, or conducting data analysis on humor, our API has you covered.</p>
              </div>
            </div>
            <div class="row">
              <div class="col-12 col-md-6 me-n1" id="video">
                <video id="about-video" width="100%" height="auto"
                  src="{% static 'assets/blackish_the_dozens_abc_broadcasting.mp4' %}" class="img-fluid"
                  controls></video>
              </div>
            </div>
            <div id="copyright-container" class="row ms-5">
              <div class="col-12 video-sub-copy">
                <sub>Clip from ABC's Hit Show <strong>black</strong>·<em>ish</em></sub>
              </div>
              <div class="col-12 copyright-text">
                <sub><i class="fa fa-copyright"></i> American Broadcasting Company (ABC)</sub>
              </div>
            </div>
            <div id="key-features" class="row">
              <div class="col-12 col-md-6">

                <h1 class="ms-5">Key Features</h1>
                <!--suppress HtmlUnknownAttribute -->
                <ul id="key-feature-list" uk-accordion>
                  <li class="uk-open">
                    <a class="uk-accordion-title" href="#">Comprehensive Filtering</a>
                    <div class="uk-accordion-content">
                      <p class="text-center feature-text">API consumers can effortlessly filter jokes based on specific
                        categories and
                        nsfw content, allowing for a highly customized joke retrieval experience.</p>
                    </div>
                  </li>
                  <li>
                    <a class="uk-accordion-title" href="#">Dual API Formats</a>
                    <div class="uk-accordion-content">
                      <p class="text-center feature-text">In addition to the REST API, we offer a GraphQL API version,
                        providing
                        flexibility and convenience for developers who prefer this modern approach to querying data.</p>
                    </div>
                  </li>
                  <li>
                    <a class="uk-accordion-title" href="#">Generous Rate Limiting</a>
                    <div class="uk-accordion-content">
                      <p class="text-center feature-text">Protects against abuse and ensures fair usage by implementing
                        robust rate limiting, making sure your
                        application's performance remains optimal even under high traffic.</p>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="align-items-center">
              <a href="#">
                <!-- Add your content here -->
              </a>
            </div>
          </section>
        </main>

        <footer class="footer desktop-display">
          <!--suppress HtmlUnknownTag -->
          <marquee>
            Over 400 Side-Splitting Yo Mama Jokes · 10 Categories to Choose From including Fat, Poor, Ugly, and Dumb ·
            Ability to filter out jokes based on explicit classification
          </marquee>
        </footer>



        <script type="text/javascript" src="{% static 'js/fontAwesomeIconPicker.min.js' %}"></script>
        <script
          src='https://cdnjs.cloudflare.com/ajax/libs/fontawesome-iconpicker/3.2.0/js/fontawesome-iconpicker.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.min.js'></script>
        <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js'></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
          integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
          crossorigin="anonymous"></script>
        <script src='https://kit.fontawesome.com/58e27c88da.js'></script>
        <!-- UIkit JS -->
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.4/dist/js/uikit.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.17.4/dist/js/uikit-icons.min.js"></script>
        <script>


          class PreloaderAnimation {
            constructor() {
              this.config = {
                animationDuration: 3000,
                messageInterval: 1000,
                fadeOutDuration: 500,
                verticalSpacing: 50
              };

              this.phrases = [
                "Loading jokes", "Preparing insults", "Getting ready to roast",
                "Warming up the comebacks", "Almost there", "Final touches",
                "Loading your mama jokes", "Preparing the dozens", "Setting up the fun"
              ];

              this.state = {
                isAnimating: false,
                startTime: Date.now(),
                currentPhraseIndex: 0
              };

              this.elements = {
                preloader: document.getElementById('preloader'),
                phrasesContainer: document.getElementById('phrases'),
                messageElement: document.getElementById('loading-message'),
                contentWrapper: document.querySelector('.content-wrapper')
              };

              // Bind methods
              this.animate = this.animate.bind(this);
              this.updateMessage = this.updateMessage.bind(this);
            }

            initialize() {
              if (!this.validateElements()) return;

              this.setupPhrases();
              this.start();
            }

            validateElements() {
              const missingElements = Object.entries(this.elements)
                .filter(([key, element]) => !element)
                .map(([key]) => key);

              if (missingElements.length > 0) {
                console.error('Missing required elements:', missingElements);
                return false;
              }
              return true;
            }

            setupPhrases() {
              this.phrases = this.shuffleArray(this.phrases);
              this.elements.phrasesContainer.innerHTML = this.createPhrasesHTML();
            }

            createPhrasesHTML() {
              return this.phrases.map((phrase, index) => `
                  <div class="phrase-item" style="transform: translateY(${index * this.config.verticalSpacing}px)">
                      <span class="phrase-text">${phrase}...</span>
                      <svg class="checkmark" viewBox="0 0 32 32">
                          <circle cx="16" cy="16" r="15" fill="none" stroke="white" stroke-width="2"/>
                          <path d="M9 16l5 5 9-9" fill="none" stroke="white" stroke-width="2"/>
                      </svg>
                  </div>
              `).join('');
            }

            shuffleArray(array) {
              const newArray = [...array];
              for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
              }
              return newArray;
            }

            start() {
              this.state.isAnimating = true;
              this.state.startTime = Date.now();
              this.messageInterval = setInterval(this.updateMessage, this.config.messageInterval);
              this.animate();
            }

            animate() {
              if (!this.state.isAnimating) return;

              const elapsed = Date.now() - this.state.startTime;
              const progress = Math.min(elapsed / this.config.animationDuration, 1);

              if (progress < 1) {
                this.updateAnimation(progress);
                requestAnimationFrame(this.animate);
              } else {
                this.stop();
              }
            }

            updateAnimation(progress) {
              const translateY = -progress * (this.phrases.length * this.config.verticalSpacing);
              this.elements.phrasesContainer.style.transform = `translateY(${translateY}px)`;

              document.querySelectorAll('.phrase-item').forEach((item, index) => {
                const itemProgress = (progress * this.phrases.length) - index;
                if (itemProgress > 0) {
                  item.classList.add('completed');
                }
              });
            }

            updateMessage() {
              this.state.currentPhraseIndex = (this.state.currentPhraseIndex + 1) % this.phrases.length;
              this.elements.messageElement.textContent =
                `${this.phrases[this.state.currentPhraseIndex]}...`;
            }

            stop() {
              this.state.isAnimating = false;
              clearInterval(this.messageInterval);

              this.elements.preloader.classList.add('fade-out');
              setTimeout(() => {
                this.elements.preloader.style.display = 'none';
                this.elements.contentWrapper.classList.add('show');
                document.body.style.overflow = 'visible';
              }, this.config.fadeOutDuration);
            }
          }
          // Add event listener to the element with ID "jod-icon"
          document.getElementById('jod-icon').addEventListener('click', async function () {
            // Get the element to modify
            const targetElement = document.getElementById('jod-icon');

            // First create a rotating exit animation
            targetElement.style.transition = 'all 0.5s ease';
            targetElement.style.transform = 'rotate(360deg) scale(0)';
            targetElement.style.opacity = '0';

            // Wait for the animation to complete
            await new Promise(resolve => setTimeout(resolve, 500));

            // Clear the element's content
            targetElement.innerHTML = '';

            // Create a speech bubble element
            const speechBubble = document.createElement('div');
            speechBubble.classList.add('speech-bubble');
            speechBubble.style.position = 'relative';
            speechBubble.style.backgroundColor = '#f8f8f8';
            speechBubble.style.border = '2px solid #ddd';
            speechBubble.style.borderRadius = '10px';
            speechBubble.style.padding = '15px';
            speechBubble.style.marginBottom = '20px';
            speechBubble.style.maxWidth = '300px';

            // Add the speech bubble pointer
            speechBubble.style.position = 'relative';
            speechBubble.innerHTML = '<div style="position: absolute; bottom: -20px; left: 20px; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 20px solid #ddd;"></div>';
            speechBubble.innerHTML += '<div style="position: absolute; bottom: -17px; left: 22px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 17px solid #f8f8f8;"></div>';

            // Create the text element
            const textElement = document.createElement('p');
            textElement.style.margin = '0';
            textElement.style.fontFamily = 'YoMamaBody';

            // Append the text element to the speech bubble
            speechBubble.appendChild(textElement);

            // Append the speech bubble to the target element
            targetElement.appendChild(speechBubble);

            // Reset the animation properties
            targetElement.style.transform = 'rotate(0deg) scale(1)';
            targetElement.style.opacity = '1';

            try {
              // Make API call to get the joke
              const response = await fetch('https://api.yo-momma.net/insults');
              const data = await response.json();

              // Use typewriter effect to display the joke
              const jokeText = data.content || "Could not load joke";
              let i = 0;
              const typeWriter = () => {
                if (i < jokeText.length) {
                  textElement.textContent += jokeText.charAt(i);
                  i++;
                  setTimeout(typeWriter, 50); // Adjust speed of typewriter effect
                }
              };

              // Start the typewriter effect
              typeWriter();
            } catch (error) {
              // Handle errors gracefully
              textElement.textContent = "Oops! Couldn't fetch a joke. Try again later!";
              console.error('Error fetching joke:', error);
            }
          });
          // Initialize when DOM is ready
          document.addEventListener('DOMContentLoaded', () => {
            const preloader = new PreloaderAnimation();
            preloader.initialize();
          });

        </script>

        {% include 'includes/history-modal.html' %}
        {% include 'includes/joke-reporting-form.html' %}
        {% include 'includes/getting-started.html' %}

</div>
    </div>
        <div class="mobile-display">
          <div id="mobile-background">
            <img id="mobile-icon" src="https://yo-mama.b-cdn.net/yo_momma_bvrand.png" height="50px" width="auto" />
            <h1 id="mobile-redirection">
              Please Visit This Site <br> On A Desktop</h1>
          </div>
        </div>
      </div>



</body>

</html>